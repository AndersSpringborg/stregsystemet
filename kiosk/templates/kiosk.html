{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>F-Klubben</title>

    <link href="{% static "kiosk/kiosk.css" %}" rel="stylesheet">
</head>

<body>
    <img id="dummy1" class="dummy front" />
    <img id="dummy2" class="dummy" />

    <script>
    var current = document.querySelector("#dummy1");
    var next = document.querySelector("#dummy2");

    function swap(tag) {
        console.log("swap");
        //Flip in the DOM
        current.classList.add("front");
        next.classList.remove("front");

        //Do the swap in js
        temp = current;
        current = next;
        next = temp;
    }

    function updateKiosk() {
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.onreadystatechange = function() {
            if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
                next.src = xmlHttp.responseText;
                swap();
            }
        }
        xmlHttp.open("GET", "/kiosk/next", true);
        xmlHttp.send(null);
    }

    swap();
    setInterval("updateKiosk()", 10000);
    updateKiosk();
    </script>

</body>

</html>
